
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>三模块打分系统</title>
  <style>
    body { font-family: Arial; margin: 20px; }
    button { margin-right: 10px; }
    .card { border: 1px solid #ccc; padding: 15px; margin: 10px 0; }
    img { max-width: 300px; display: block; margin-top: 10px; }
  </style>
</head>
<body>

<h2>三模块打分系统</h2>

<div>
  <button onclick="loadModule(1)">模块一：单条打分</button>
  <button onclick="loadModule(2)">模块二：两条对比</button>
  <button onclick="loadModule(3)">模块三：五条排序</button>
</div>

<hr>
<div id="moduleContainer"></div>
<button onclick="saveResults()">保存结果</button>

<script>
let currentModule = 1;
let results = { module1: {}, module2: {}, module3: {} };

function loadModule(num) {
  currentModule = num;
  let file = `data_module${num}.json`;
  fetch(file)
    .then(res => res.json())
    .then(data => {
      if (num === 1) renderModule1(data);
      else if (num === 2) renderModule2(data);
      else if (num === 3) renderModule3(data);
    });
}

function renderModule1(data) {
  const container = document.getElementById('moduleContainer');
  container.innerHTML = '';
  data.forEach(item => {
    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `
      <p><strong>${item.text}</strong></p>
      <img src="${item.image}">
      <label>打分：
        <select onchange="results.module1[${item.id}] = this.value">
          <option value="">请选择</option>
          <option value="0">0分</option>
          <option value="1">1分</option>
          <option value="2">2分</option>
          <option value="3">3分</option>
          <option value="4">4分</option>
        </select>
      </label>
    `;
    container.appendChild(card);
  });
}

function renderModule2(data) {
  const container = document.getElementById('moduleContainer');
  container.innerHTML = '';
  data.forEach((pair, idx) => {
    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `
      <p><strong>对比组 ${idx + 1}</strong></p>
      <div>
        <input type="radio" name="pair${idx}" value="A" onchange="results.module2[${idx}] = 'A'">
        <strong>A:</strong> ${pair.textA} <br>
        <img src="${pair.imageA}">
      </div>
      <div>
        <input type="radio" name="pair${idx}" value="B" onchange="results.module2[${idx}] = 'B'">
        <strong>B:</strong> ${pair.textB} <br>
        <img src="${pair.imageB}">
      </div>
    `;
    container.appendChild(card);
  });
}

function renderModule3(data) {
  const container = document.getElementById('moduleContainer');
  container.innerHTML = '<p><strong>请为以下5项内容手动排序，1为最好，5为最差。</strong></p>';
  data.forEach((item, idx) => {
    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `
      <p><strong>${item.text}</strong></p>
      <img src="${item.image}">
      <label>名次：
        <select onchange="setRank(${item.id}, this.value)">
          <option value="">请选择</option>
          <option value="1">第1名</option>
          <option value="2">第2名</option>
          <option value="3">第3名</option>
          <option value="4">第4名</option>
          <option value="5">第5名</option>
        </select>
      </label>
    `;
    container.appendChild(card);
  });
}
function setRank(id, value) {
  results.module3[id] = parseInt(value);
}

function saveResults() {
  const blob = new Blob([JSON.stringify(results, null, 2)], { type: 'application/json' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = '打分结果.json';
  a.click();
}
</script>

</body>
</html>
